
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Ruby Journal</title>
  <meta name="author" content="Trung Lê">

  
  <meta name="description" content="So you search for how to moneykey-patch a class in Ruby? Read on, I&#8217;ll show you how. Note Ruby is very powerful and flexible. Before I show &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://ruby-journal.com/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Ruby Journal" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href='http://fonts.googleapis.com/css?family=Just+Me+Again+Down+Here' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Nixie+One' rel='stylesheet' type='text/css'>
  

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-54360362-1', 'auto');
    ga('send', 'pageview');
  </script>



</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Ruby Journal</a></h1>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:ruby-journal.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Home</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/how-to-open-slash-override-slash-monkey-patch-a-class-in-ruby/">How to Open/override/monkey-patch a Class in Ruby?</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-10-09T11:18:00+11:00" pubdate data-updated="true">Oct 9<span>th</span>, 2014</time>
        
         | <a href="/how-to-open-slash-override-slash-monkey-patch-a-class-in-ruby/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content">
<p>So you search for how to moneykey-patch a class in Ruby? Read on, I&#8217;ll show you how.</p>

<h2 id="note">Note</h2>

<p>Ruby is very powerful and flexible. Before I show you how to override a class, I want to
ensure that you understand that monkey-patching is not considered a good practice. It might
be the source of hard to trace bugs.</p>

<h2 id="open-existing-class-by-re-defining-class">Open existing class by re-defining class</h2>

<p>Imagine we have following class:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="k">class</span> <span class="nc">Greeter</span>
</span><span class="line">  <span class="k">def</span> <span class="nf">hello</span>
</span><span class="line">    <span class="s2">&quot;hello world&quot;</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line"><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>You can open your existing class easily by re-declaring the class and its methods:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="k">class</span> <span class="nc">Greeter</span>
</span><span class="line">  <span class="k">def</span> <span class="nf">hello</span>
</span><span class="line">    <span class="s2">&quot;hello Uncle!&quot;</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line"><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>The <code>Greeter#hello</code> would be overriden with new message <em>if</em> class <code>Greeter</code> does exist.</p>

<p>If class <code>Greeter</code> has not been defined, then our above code would define a new Greeter class. And
that could lead to side effect if we are not careful.</p>

<h2 id="open-existing-class-with-classeval">Open existing class with class_eval</h2>

<p>Alternatively, Ruby provide <code>class_eval</code> method which would check for the existence of the to-be overriden
class. If the class does exist, the block of code that is parsed to <code>class_eval</code> would be evaluated and
replace the existing methods. So our example above will be:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="no">Greeter</span><span class="o">.</span><span class="n">class_eval</span> <span class="k">do</span>
</span><span class="line">  <span class="k">def</span> <span class="nf">hello</span>
</span><span class="line">    <span class="s2">&quot;hello WORLD!&quot;</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line"><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>If class does not exist, an NameError exeception will be raised:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="no">NonExistingGreeter</span><span class="o">.</span><span class="n">class_eval</span> <span class="k">do</span>
</span><span class="line">  <span class="k">def</span> <span class="nf">hello</span>
</span><span class="line">    <span class="s2">&quot;hello WORLD!&quot;</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line"><span class="k">end</span>
</span><span class="line"><span class="c1">#=&gt; NameError: uninitialized constant NonExistingGreeter</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h2 id="conclusion">Conclusion</h2>

<p>Be aware of your action before you override a class and I highly recommend you to use <code>class_eval</code> because
it does gives you extra class existence check.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/quick-guide-to-activesupport-hashwithindifferentaccess/">Quick Guide to ActiveSupport::HashWithIndifferentAccess</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-10-09T10:49:00+11:00" pubdate data-updated="true">Oct 9<span>th</span>, 2014</time>
        
         | <a href="/quick-guide-to-activesupport-hashwithindifferentaccess/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content">
<p>Hash is beautiful. It is one of many things why I love Ruby. As you might have known,
Hash is identified by a key, this key could be either a String or a Symbol. For most
of cases, people tend to go for symbol because it would take up less memory (though it
might come with a side effect that is Symbol is not GC-colletable (Ruby 2.2.0 does clean
it up though)).</p>

<p>There are access usecases that requires our hash key to be interchangable between String and Symbol
key. For example, web application request parameter processing.</p>

<p>We could typecast the key to either String or Symbol but it would soon emerge an
annoying pattern. Instead, with the help of ActiveSupport, you can create a hash with
no differences if accessing using String or Symbol key. Introducing ActiveSupport::HashWithIndifferentAccess.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/quick-guide-to-activesupport-hashwithindifferentaccess/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/how-to-solve-sss-hiring-challenge/">How to Solve Silicon Straits Saigon Hiring Challenge</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-08-21T17:04:00+10:00" pubdate data-updated="true">Aug 21<span>st</span>, 2014</time>
        
         | <a href="/how-to-solve-sss-hiring-challenge/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Hello folks</p>

<p>For whom who might have not heard of Silicon Straits Saigon (SSS), this
company is one cool company in Vietnam with strong focus in tech such
as iOS and Web. When I use the word cool, I did not mean it before I
touch base with their hiring challenge.</p>

<p>SSS is known to have a quite unique way to challenge potential employees.
They give you a very cryptic page <a href="http://hiring.siliconstraits.vn">http://hiring.siliconstraits.vn</a> and
asks you to hack them.</p>

<p>Well, today I am going to show you how to solve this problem step by step.
I hope Mr. An (Director of SSS) won’t hate me for this.</p>

<p>Spoiler alert! Go give the challange a go yourself before reading!</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/how-to-solve-sss-hiring-challenge/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/what-is-the-difference-between-git-rebase-and-git-merge/">What Is the Difference Between Git Rebase and Git Merge</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-08-18T13:52:00+10:00" pubdate data-updated="true">Aug 18<span>th</span>, 2014</time>
        
         | <a href="/what-is-the-difference-between-git-rebase-and-git-merge/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content">
<p>There are many people who asked me about the differences between <code>git rebase</code> vs <code>git merge</code>.
Read on if you want to know :-)</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/what-is-the-difference-between-git-rebase-and-git-merge/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/override-ordering-with-activerecord/">Override Ordering With ActiveRecord</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-05-23T14:33:00+10:00" pubdate data-updated="true">May 23<span>rd</span>, 2014</time>
        
         | <a href="/override-ordering-with-activerecord/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content">
<p>If your ActiveRecord models happen to have default ordering scope, you could override
this ordering scope in queries by using <code>reorder</code> method.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/override-ordering-with-activerecord/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/how-to-write-custom-serializer-for-activerecord-number-serialize/">How to Write Custom Serializer for ActiveRecord#serialize</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-04-21T07:49:00+10:00" pubdate data-updated="true">Apr 21<span>st</span>, 2014</time>
        
         | <a href="/how-to-write-custom-serializer-for-activerecord-number-serialize/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content">
<p>Rails comes with a powerful and convenient <code>serialize</code> method that would do the serialization/deserializtion
for a specify column of an ActiveRecord model. In today tutorial, I&#8217;ll walk you through on how to write a
custom serializer that would encrypt/decrypt your serialized value for extra security.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/how-to-write-custom-serializer-for-activerecord-number-serialize/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/how-to-override-default-primary-key-id-in-rails/">How to Override Default Primary Key Id in Rails</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-04-18T10:28:00+10:00" pubdate data-updated="true">Apr 18<span>th</span>, 2014</time>
        
         | <a href="/how-to-override-default-primary-key-id-in-rails/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content">
<p>Rails is all about Convention over Configuration, this includes the DB primary key,
which is always set to be <code>id</code> column. What if you want to use different column
as your primary key? Read on and I&#8217;ll show you how.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/how-to-override-default-primary-key-id-in-rails/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/how-to-dry-your-rails-routes/">How to DRY Your Rails Routes</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-04-18T09:29:00+10:00" pubdate data-updated="true">Apr 18<span>th</span>, 2014</time>
        
         | <a href="/how-to-dry-your-rails-routes/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content">
<p>So you have duplicated routes in your resources? In today tutorial, I&#8217;ll show you how to DRY it up abit.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/how-to-dry-your-rails-routes/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/liquid-template-in-ruby-done-right/">Liquid Template in Ruby Done Right</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-04-10T16:48:00+10:00" pubdate data-updated="true">Apr 10<span>th</span>, 2014</time>
        
         | <a href="/liquid-template-in-ruby-done-right/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content">
<p>Liquid Templating Engine is an awesome technology and with the power of gem &#8216;liquid&#8217;,
everybody can start using without much hassles. I saw many projects used this gem
but sadly most of them are quite bad. In this tutorial, I&#8217;ll go through a bad example
and show you how to refactor it.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/liquid-template-in-ruby-done-right/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/how-to-style-kaminari-pagination-with-twitter-bootstrap-3/">How to Style Kaminari Pagination With Twitter Bootstrap 3</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-04-01T19:04:00+11:00" pubdate data-updated="true">Apr 1<span>st</span>, 2014</time>
        
         | <a href="/how-to-style-kaminari-pagination-with-twitter-bootstrap-3/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content">
<p>Kamiari is an awesome that would do all heavy-lifting work if you want to do pagination.
Yet Kaminari&#8217;s default layout does not fit well with Twitter Bootstrap pagination styling.
In this tutorial, I&#8217;ll show you how to make Kaminari play well with Bootstrap v3.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/how-to-style-kaminari-pagination-with-twitter-bootstrap-3/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/2/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>About Me</h1>
  <p>I am a humble Ruby enthusiast.</p>
  <p>I love art, reading history book, table tennis, golf</p>
</section>

<iframe width='180' height='260' src='http://wizpert.com/wizapi/widget?beta_key=3ba42&ep=19785&size=standard&topic_slug=rails-programming' frameborder='0' scrolling='no' allowfullscreen></iframe>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/how-to-open-slash-override-slash-monkey-patch-a-class-in-ruby/">How to open/override/monkey-patch a class in Ruby?</a>
      </li>
    
      <li class="post">
        <a href="/quick-guide-to-activesupport-hashwithindifferentaccess/">Quick guide to ActiveSupport::HashWithIndifferentAccess</a>
      </li>
    
      <li class="post">
        <a href="/how-to-solve-sss-hiring-challenge/">How to solve Silicon Straits Saigon hiring challenge</a>
      </li>
    
      <li class="post">
        <a href="/what-is-the-difference-between-git-rebase-and-git-merge/">What is the difference between git rebase and git merge</a>
      </li>
    
      <li class="post">
        <a href="/override-ordering-with-activerecord/">Override ordering with ActiveRecord</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/joneslee85">@joneslee85</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'joneslee85',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("joneslee85", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/joneslee85" class="twitter-follow-button" data-show-count="false">Follow @joneslee85</a>
  
</section>



<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/joneslee85?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Trung Lê -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'ruby-journal';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
